<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ProCheeser ‚Äî Pro (Wood + AI + Online + Sound)</title>

<link rel="stylesheet" href="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.css">
<link rel="stylesheet" href="style.css">

<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
</head>
<body>

<div class="user-header">
    <div id="userInfo" style="display:none;">
        <img id="userAvatar" src="" alt="Avatar">
        <span id="userName">Player</span>
        <button id="logoutBtn" class="small-btn">Logout</button>
    </div>
    <div id="authContainer">
        <button id="loginBtn" class="google-btn">Sign in with Google</button>
    </div>
</div>

<h1>ProCheeser</h1>

<div id="death-warning" style="display:none;">‚ö†Ô∏è You have chosen <b>MISSION IMPOSSIBLE</b>.<br>Stockfish will now play at MAXIMUM POWER.<br><small>There is no escape.</small></div>

<div class="main-container">
  <div class="board-section">
    <div id="topPlayerLabel" class="player-info" style="display:none">Opponent</div>

    <div id="timer-black-container" class="timer-display"><span class="player-label">Black</span><span id="time-b">10:00</span></div>
    <div id="myBoard"></div>
    <div id="timer-white-container" class="timer-display"><span class="player-label">White</span><span id="time-w">10:00</span></div>
    
    <div id="bottomPlayerLabel" class="player-info" style="display:none">You</div>
  </div>

  <div class="controls-panel">
    <div class="status-box">
  <h3>Game Status</h3>
  <p id="statusText">Select settings and Start.</p>
  <div id="aiStatus" style="font-weight:bold; color:orange; margin-top:5px;"></div>
</div>

<div id="roomDisplay" class="status-box" style="display:none; margin-top:10px; background:#2c3e50; border-left:5px solid #3498db;">
  <h3 style="color:#aab7b8">Room Code</h3>
  <p id="roomCodeText" style="font-family:monospace; font-size:1.4rem; letter-spacing:2px; color:white; user-select:all; cursor:pointer;" title="Click to Copy">---</p>
  <small style="color:#bdc3c7">Share this with your friend</small>
</div>


    <div id="gameSettings">
      
      <label for="timeControl">Timer Setting</label>
      <select id="timeControl">
        <option value="300">5 Minutes</option>
        <option value="600" selected>10 Minutes</option>
        <option value="1800">30 Minutes</option>
        <option value="3600">60 Minutes</option>
        <option value="999999">No Timer</option>
      </select>

      <label for="gameMode">Mode</label>
      <select id="gameMode">
        <option value="ai">Play vs AI (Computer)</option>
        <option value="local">Pass & Play (Human vs Human)</option>
        <option value="online_friend">Online: Play Friend</option>
        <option value="online_random">Online: Play Random (Ranked)</option>
      </select>

      <hr style="border:0; border-top:1px solid #444; margin:10px 0;">

      <div id="aiOptions" class="mode-options">
        <label for="difficulty">Hardness Level (AI IQ)</label>
        <select id="difficulty">
          <option value="1">Level 1 (Strong & Instant)</option>
          <option value="2">Level 2 (Very Strong & Instant)</option>
          <option value="3" selected>Level 3 (Master & Instant)</option>
          <option value="4">Level 4 (Elite & Instant)</option>
          <option value="5">Level 5 (Grandmaster Blitz)</option>
          <option value="6">Level 6 (GOD MODE - Unbeatable)</option>
          <option value="7" style="color:red;font-weight:bold;">üö® MISSION IMPOSSIBLE (IQ ‚àû)</option>
        </select>
        <label for="aiColor">Play As</label>
        <select id="aiColor">
          <option value="white">White</option>
          <option value="black">Black</option>
        </select>
        <button class="primary-btn" id="startAiBtn">Start vs AI</button>
      </div>

      <div id="localOptions" class="mode-options" style="display:none;">
          <p style="color:#aaa; font-size:0.9rem; margin-bottom:10px;">Play on this device.</p>
          <button class="primary-btn" id="startLocalBtn">Start Pass & Play</button>
      </div>

      <div id="friendOptions" class="mode-options" style="display:none;">
        <label>Room ID</label>
        <div style="display:flex; gap:5px; margin-bottom:10px;">
            <input id="roomIdInput" placeholder="Enter ID or Empty to Create" style="width:100%; padding:10px; border-radius:5px; border:none;">
        </div>
        <label>Your Color (If creating)</label>
        <select id="friendColor">
            <option value="random">Random</option>
            <option value="white">White</option>
            <option value="black">Black</option>
        </select>
        <button class="primary-btn" id="joinCreateBtn">Create / Join Room</button>
      </div>

      <div id="randomOptions" class="mode-options" style="display:none;">
         <p style="font-size:0.9rem; color:#aaa; margin-bottom:10px;">
            Find a ranked match with a random player online. <br>
            <span style="color:#f39c12;">* Login required.</span>
         </p>
         <button class="primary-btn" id="findMatchBtn">Find Match</button>
      </div>

    </div>

    <div id="inGameControls" style="display:none; margin-top:10px;">
        
        <div id="gameActions" style="display:flex; gap:10px; margin-bottom:10px;">
            <button id="resignBtn" class="secondary-btn" style="background:#d9534f; color:white; flex:1;">üè≥ Resign</button>
            <button id="drawBtn" class="secondary-btn" style="background:#f0ad4e; color:white; flex:1;">¬Ω Offer Draw</button>
        </div>

        <div class="btn-group" id="undoRedoControls">
            <button class="secondary-btn" id="undoBtn">Undo</button>
            <button class="secondary-btn" id="redoBtn">Redo</button>
        </div>

        <button class="secondary-btn" id="resetBtn" style="margin-top:10px;">Reset / Menu</button>
    </div>

    <button class="secondary-btn" id="analyzeBtn" style="display:none; background:#4a90e2; color:white; margin-top:5px;">üîç Analyze Game</button>

    <div id="analysisControls" style="display:none;">
      <div style="background:#2b2b2b; padding:10px; border-radius:6px; border:1px solid #444;">
        <h3 style="margin-top:0; color:#f0d9b5; border-bottom:1px solid #444; padding-bottom:5px;">Analysis Mode</h3>
        
        <div style="display:flex; gap:5px; margin-bottom:10px; justify-content:center;">
            <button id="anStart" class="secondary-btn" style="padding:5px 10px;">|&lt;</button>
            <button id="anPrev" class="secondary-btn" style="padding:5px 15px;">&lt;</button>
            <button id="anNext" class="secondary-btn" style="padding:5px 15px;">&gt;</button>
            <button id="anEnd" class="secondary-btn" style="padding:5px 10px;">&gt;|</button>
        </div>

        <div style="font-family:monospace; color:#ccc; font-size:0.9rem;">
            <div style="margin-bottom:4px;">Evaluation: <span id="evalScore" style="color:#fff; font-weight:bold;">...</span></div>
            <div>Best Move: <span id="bestMove" style="color:#4a90e2;">...</span></div>
        </div>
      </div>
      <button id="exitAnalysisBtn" class="secondary-btn" style="width:100%; margin-top:10px; background:#444;">üè† Back to Main Menu</button>
    </div>

  </div>
</div>

<div id="endGameBanner"></div>

<audio id="deathModeSound" src="https://assets.mixkit.co/sfx/preview/mixkit-creepy-laugh-414.wav"></audio>

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://unpkg.com/@chrisoakman/chessboardjs@1.0.0/dist/chessboard-1.0.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chess.js/0.10.3/chess.min.js"></script>
<script src="script.js"></script>
</body>
</html>
